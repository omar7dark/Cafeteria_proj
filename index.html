<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ÙƒØ§ÙÙŠØªÙŠØ±ÙŠØ§ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</title>
  <style>
    body {
      font-family: 'Tahoma', sans-serif;
      background: #f5f5f5;
      text-align: center;
      padding: 20px;
    }
    h1 {
      color: #333;
    }
    .item {
      margin: 15px 0;
    }
    input[type="number"] {
      width: 50px;
      padding: 5px;
      text-align: center;
    }
    button {
      background-color: #4CAF50;
      color: white;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      cursor: pointer;
      border-radius: 10px;
    }
    button:hover {
      background-color: #45a049;
    }
  </style>
</head>
<body>

  <h1>Ø·Ù„Ø¨Ø§Øª ÙƒØ§ÙÙŠØªÙŠØ±ÙŠØ§ Ø§Ù„Ù…Ø¬Ù…Ø¹ Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠ</h1>
  <h2 id="room-name">ØºØ±ÙØ© ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙØ©</h2>

  <div class="item">
    <label>ğŸµ Ø´Ø§ÙŠ:</label>
    <input type="number" id="tea" min="0" value="0">
  </div>

  <div class="item">
    <label>â˜• Ù‚Ù‡ÙˆØ©:</label>
    <input type="number" id="coffee" min="0" value="0">
  </div>

  <div class="item">
    <label>ğŸ’§ Ù…Ø§Ø¡:</label>
    <input type="number" id="water" min="0" value="0">
  </div>

  <div class="item">
    <label>ğŸ¥¤ Ø¹ØµÙŠØ± Ø®ÙˆØ®:</label>
    <input type="number" id="juice" min="0" value="0">
  </div>

  <button onclick="sendOrder()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ÙŠØ©</button>

  <script>
    // ÙˆØ¸ÙŠÙØ© Ù„ØªØ­Ù„ÙŠÙ„ URL ÙˆØ§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ©
    function getRoomFromURL() {
      const params = new URLSearchParams(window.location.search);
      return params.get("room");
    }

    // ØªØ¹ÙŠÙŠÙ† Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ© Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©
    function setRoomName(roomName) {
      const roomElement = document.getElementById("room-name");
      roomElement.textContent = `ØºØ±ÙØ©: ${roomName}`;
    }

    async function sendOrder() {
      const tea = document.getElementById('tea').value;
      const coffee = document.getElementById('coffee').value;
      const water = document.getElementById('water').value;
      const juice = document.getElementById('juice').value;
      
      const roomName = getRoomFromURL();
      const roomId = roomName;  // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ© ÙƒÙ…Ø¤Ø´Ø± (Ù…Ù† Ø§Ù„Ù€ URL)
      
      // ØªØ­Ø¯ÙŠØ¯ Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ©
      let urlGoogleSheets;
      if (roomId === "Ù†Ù‚Ø§Ø¨Ø©_Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ÙŠÙ†") {
        urlGoogleSheets = 'https://script.google.com/macros/s/AKfycbxhgiDXjUvIW3-hl1zEELvVJog7kQsXzPSIS7YdFiLZ8YnLGlQ_cdtQ-Grt-rw7Oy_T/exec';
      } else if (roomId === "Ø§Ù„Ù…Ù†Ø¸Ù…Ø§Øª_Ø§Ù„Ù…Ø­Ù„ÙŠØ©") {
        urlGoogleSheets = 'https://script.google.com/macros/s/AKfycbzjsECjcBavJ-xGjqP5S-ku7gi6FdcJcWgWzu1JODuMd_1HDd_R-0TRmGvk8LKdvqBdig/exec';
      } else if (roomId === "Ø§Ù„ØºØ±ÙØ©_Ø§Ù„Ø¯ÙˆÙ„ÙŠØ©") {
        urlGoogleSheets = 'https://script.google.com/macros/s/AKfycbyGs7eunbx2oBCxYiKRlrsbPyf3nNKVLw6sdYirp1O6m7_VOCkP_pc7wGxnunvYmGB9zA/exec';
      } else if (roomId === "Ø§Ù„Ù†Ø§Ø¯ÙŠ_Ø§Ù„Ø¹Ù„Ù…ÙŠ") {
        urlGoogleSheets = 'https://script.google.com/macros/s/AKfycbyErk4ayBFZIWhlalC6n_DiQWiCyhS1ZkUJ9zY4yrViT1YVY3ILAiILm7SrZTGFTS8X9Q/exec';
      } else {
        alert('ØºØ±ÙØ© ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙØ©');
        return;
      }

      // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…
      let message = `ğŸ›ï¸ Ø·Ù„Ø¨ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† ØºØ±ÙØ©: ${roomName}\n`;
      if (tea > 0) message += `ğŸµ Ø´Ø§ÙŠ: ${tea}\n`;
      if (coffee > 0) message += `â˜• Ù‚Ù‡ÙˆØ©: ${coffee}\n`;
      if (water > 0) message += `ğŸ’§ Ù…Ø§Ø¡: ${water}\n`;
      if (juice > 0) message += `ğŸ¥¤ Ø¹ØµÙŠØ± Ø®ÙˆØ®: ${juice}\n`;
      message += `ğŸ•’ Ø§Ù„ÙˆÙ‚Øª: ${new Date().toLocaleString('ar-EG')}`;

      const botToken = '8014365512:AAFV1nIDBPzwJwItUrZudEHIkz9cMgyJGP4';
      const chatId = '-1002533366963'; // ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ù‡Ø°Ø§ Ø§Ù„Ù€ chatId ØµØ­ÙŠØ­
      const urlTelegram = `https://api.telegram.org/bot${botToken}/sendMessage`;

      // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…
      await fetch(urlTelegram, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          chat_id: chatId,
          text: message
        })
      });

      // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø¬ÙˆØ¬Ù„ Ø´ÙŠØª
      await fetch(urlGoogleSheets, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          tea: tea,
          coffee: coffee,
          water: water,
          juice: juice,
          time: new Date().toLocaleString('ar-EG'),
          roomId: roomId  // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù€ roomId Ù‡Ù†Ø§
        }),
        mode: 'no-cors'
      });

      alert('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­ âœ…');

      // ØªØµÙÙŠØ± Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
      document.getElementById('tea').value = 0;
      document.getElementById('coffee').value = 0;
      document.getElementById('water').value = 0;
      document.getElementById('juice').value = 0;

      // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ù„Ø¨Ø¯Ø¡ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
      location.reload();
    }

    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØºØ±ÙØ© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    window.onload = function() {
      const roomName = getRoomFromURL();
      if (roomName) {
        setRoomName(roomName);
      } else {
        alert('ØºØ±ÙØ© ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙØ© ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·!');
      }
    }
  </script>

</body>
</html>
