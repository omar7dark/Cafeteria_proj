<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>كافيتيريا المجمع الحوكمي</title>
  <style>
    body {
      font-family: 'Tahoma', sans-serif;
      background: linear-gradient(to right, #f8f8f8, #e0e0e0);
      text-align: center;
      padding: 20px;
    }
    h1 {
      color: #2c3e50;
      margin-bottom: 30px;
    }
    .menu {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      max-width: 600px;
      margin: 0 auto;
    }
    .item {
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .item label {
      display: block;
      margin-bottom: 10px;
      font-size: 18px;
    }
    input[type="number"] {
      width: 60px;
      padding: 8px;
      font-size: 16px;
      text-align: center;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    button {
      margin-top: 30px;
      background-color: #27ae60;
      color: white;
      padding: 15px 30px;
      font-size: 18px;
      border: none;
      cursor: pointer;
      border-radius: 12px;
      transition: background 0.3s;
    }
    button:hover {
      background-color: #219150;
    }
  </style>
</head>
<body>

  <h1>☕ كافيتيريا المجمع الحوكمي ☕</h1>

  <div class="menu">
    <div class="item">
      <label>🍵 شاي</label>
      <input type="number" id="tea" min="0" value="0">
    </div>

    <div class="item">
      <label>☕ قهوة</label>
      <input type="number" id="coffee" min="0" value="0">
    </div>

    <div class="item">
      <label>💧 ماء</label>
      <input type="number" id="water" min="0" value="0">
    </div>

    <div class="item">
      <label>🥤 عصير خوخ</label>
      <input type="number" id="juice" min="0" value="0">
    </div>
  </div>

  <button onclick="sendOrder()">إرسال الطلبية</button>

  <script>
    async function sendOrder() {
      const tea = document.getElementById('tea').value;
      const coffee = document.getElementById('coffee').value;
      const water = document.getElementById('water').value;
      const juice = document.getElementById('juice').value;
      const roomId = 'room1';

      let message = "🛎️ طلبية جديدة من كافيتيريا المجمع الحوكمي:\n";
      if (tea > 0) message += ` شاي: ${tea}\n`;
      if (coffee > 0) message += ` قهوة: ${coffee}\n`;
      if (water > 0) message += ` ماء: ${water}\n`;
      if (juice > 0) message += ` عصير خوخ: ${juice}\n`;
      message += `🏠 الغرفة: ${roomId}\n`;
      message += `🕒 الوقت: ${new Date().toLocaleString('ar-EG')}`;

      const botToken = '8014365512:AAFV1nIDBPzwJwItUrZudEHIkz9cMgyJGP4';
      const chatId = '-1002533366963'; // تأكد أنه صحيح

      const urlTelegram = `https://api.telegram.org/bot${botToken}/sendMessage`;

      // إرسال إلى تيليجرام
      await fetch(urlTelegram, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          chat_id: chatId,
          text: message
        })
      });

      // إرسال إلى جوجل شيت
      const urlGoogleSheets = 'https://script.google.com/macros/s/AKfycbwWlGhtY65XWrh3DdKOG5CmZUKhIIoeCxre3ttfq_Ymh8fokjyJQbqTDFcnhnlygL_A/exec';
      
      await fetch(urlGoogleSheets, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          tea: tea,
          coffee: coffee,
          water: water,
          juice: juice,
          roomId: roomId,
          time: new Date().toLocaleString('ar-EG')
        }),
        mode: 'no-cors'
      });

      // بعد الإرسال تصفير و تحديث الصفحة
      alert('✅ تم إرسال الطلب بنجاح');
      window.location.reload();
    }
  </script>

</body>
</html>
